(self.webpackChunk_niivue_docs=self.webpackChunk_niivue_docs||[]).push([[843],{5806:t=>{t.exports=function(t,e){var i=t.length;if(t===e)return!0;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}},6704:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});i(4041);var n=i(213),s=i(1085);function r(t){let{children:e,fallback:i}=t;return(0,n.A)()?(0,s.jsx)(s.Fragment,{children:e?.()}):i??null}},3172:(t,e,i)=>{"use strict";i.d(e,{p8:()=>n,tb:()=>s});var n=1e-6,s="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},5878:(t,e,i)=>{"use strict";i.d(e,{fA:()=>r,lw:()=>a,vt:()=>s});var n=i(3172);function s(){var t=new n.tb(9);return n.tb!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function r(t,e,i,s,r,a,o,l,h){var f=new n.tb(9);return f[0]=t,f[1]=e,f[2]=i,f[3]=s,f[4]=r,f[5]=a,f[6]=o,f[7]=l,f[8]=h,f}function a(t,e,i){var n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],l=e[5],h=e[6],f=e[7],c=e[8],d=i[0],u=i[1],_=i[2],A=i[3],g=i[4],E=i[5],m=i[6],I=i[7],x=i[8];return t[0]=d*n+u*a+_*h,t[1]=d*s+u*o+_*f,t[2]=d*r+u*l+_*c,t[3]=A*n+g*a+E*h,t[4]=A*s+g*o+E*f,t[5]=A*r+g*l+E*c,t[6]=m*n+I*a+x*h,t[7]=m*s+I*o+x*f,t[8]=m*r+I*l+x*c,t}},9095:(t,e,i)=>{"use strict";i.d(e,{$0:()=>g,B8:()=>f,C:()=>a,D_:()=>l,Ny:()=>m,Qr:()=>A,Tl:()=>d,eL:()=>_,fA:()=>o,hs:()=>u,lK:()=>I,lw:()=>c,mg:()=>h,o8:()=>r,v3:()=>E,vt:()=>s});var n=i(3172);function s(){var t=new n.tb(16);return n.tb!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function r(t){var e=new n.tb(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(t,e,i,s,r,a,o,l,h,f,c,d,u,_,A,g){var E=new n.tb(16);return E[0]=t,E[1]=e,E[2]=i,E[3]=s,E[4]=r,E[5]=a,E[6]=o,E[7]=l,E[8]=h,E[9]=f,E[10]=c,E[11]=d,E[12]=u,E[13]=_,E[14]=A,E[15]=g,E}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function h(t,e){if(t===e){var i=e[1],n=e[2],s=e[3],r=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=r,t[11]=e[14],t[12]=s,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function f(t,e){var i=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],h=e[7],f=e[8],c=e[9],d=e[10],u=e[11],_=e[12],A=e[13],g=e[14],E=e[15],m=i*o-n*a,I=i*l-s*a,x=i*h-r*a,p=n*l-s*o,M=n*h-r*o,S=s*h-r*l,v=f*A-c*_,y=f*g-d*_,T=f*E-u*_,b=c*g-d*A,C=c*E-u*A,N=d*E-u*g,F=m*N-I*C+x*b+p*T-M*y+S*v;return F?(F=1/F,t[0]=(o*N-l*C+h*b)*F,t[1]=(s*C-n*N-r*b)*F,t[2]=(A*S-g*M+E*p)*F,t[3]=(d*M-c*S-u*p)*F,t[4]=(l*T-a*N-h*y)*F,t[5]=(i*N-s*T+r*y)*F,t[6]=(g*x-_*S-E*I)*F,t[7]=(f*S-d*x+u*I)*F,t[8]=(a*C-o*T+h*v)*F,t[9]=(n*T-i*C-r*v)*F,t[10]=(_*M-A*x+E*m)*F,t[11]=(c*x-f*M-u*m)*F,t[12]=(o*y-a*b-l*v)*F,t[13]=(i*b-n*y+s*v)*F,t[14]=(A*I-_*p-g*m)*F,t[15]=(f*p-c*I+d*m)*F,t):null}function c(t,e,i){var n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],l=e[5],h=e[6],f=e[7],c=e[8],d=e[9],u=e[10],_=e[11],A=e[12],g=e[13],E=e[14],m=e[15],I=i[0],x=i[1],p=i[2],M=i[3];return t[0]=I*n+x*o+p*c+M*A,t[1]=I*s+x*l+p*d+M*g,t[2]=I*r+x*h+p*u+M*E,t[3]=I*a+x*f+p*_+M*m,I=i[4],x=i[5],p=i[6],M=i[7],t[4]=I*n+x*o+p*c+M*A,t[5]=I*s+x*l+p*d+M*g,t[6]=I*r+x*h+p*u+M*E,t[7]=I*a+x*f+p*_+M*m,I=i[8],x=i[9],p=i[10],M=i[11],t[8]=I*n+x*o+p*c+M*A,t[9]=I*s+x*l+p*d+M*g,t[10]=I*r+x*h+p*u+M*E,t[11]=I*a+x*f+p*_+M*m,I=i[12],x=i[13],p=i[14],M=i[15],t[12]=I*n+x*o+p*c+M*A,t[13]=I*s+x*l+p*d+M*g,t[14]=I*r+x*h+p*u+M*E,t[15]=I*a+x*f+p*_+M*m,t}function d(t,e,i){var n,s,r,a,o,l,h,f,c,d,u,_,A=i[0],g=i[1],E=i[2];return e===t?(t[12]=e[0]*A+e[4]*g+e[8]*E+e[12],t[13]=e[1]*A+e[5]*g+e[9]*E+e[13],t[14]=e[2]*A+e[6]*g+e[10]*E+e[14],t[15]=e[3]*A+e[7]*g+e[11]*E+e[15]):(n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],l=e[5],h=e[6],f=e[7],c=e[8],d=e[9],u=e[10],_=e[11],t[0]=n,t[1]=s,t[2]=r,t[3]=a,t[4]=o,t[5]=l,t[6]=h,t[7]=f,t[8]=c,t[9]=d,t[10]=u,t[11]=_,t[12]=n*A+o*g+c*E+e[12],t[13]=s*A+l*g+d*E+e[13],t[14]=r*A+h*g+u*E+e[14],t[15]=a*A+f*g+_*E+e[15]),t}function u(t,e,i){var n=i[0],s=i[1],r=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function _(t,e,i){var n=Math.sin(i),s=Math.cos(i),r=e[4],a=e[5],o=e[6],l=e[7],h=e[8],f=e[9],c=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*s+h*n,t[5]=a*s+f*n,t[6]=o*s+c*n,t[7]=l*s+d*n,t[8]=h*s-r*n,t[9]=f*s-a*n,t[10]=c*s-o*n,t[11]=d*s-l*n,t}function A(t,e,i){var n=Math.sin(i),s=Math.cos(i),r=e[0],a=e[1],o=e[2],l=e[3],h=e[4],f=e[5],c=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*s+h*n,t[1]=a*s+f*n,t[2]=o*s+c*n,t[3]=l*s+d*n,t[4]=h*s-r*n,t[5]=f*s-a*n,t[6]=c*s-o*n,t[7]=d*s-l*n,t}function g(t,e,i){var s,r,a,o=i[0],l=i[1],h=i[2],f=Math.hypot(o,l,h);return f<n.p8?null:(o*=f=1/f,l*=f,h*=f,s=Math.sin(e),a=1-(r=Math.cos(e)),t[0]=o*o*a+r,t[1]=l*o*a+h*s,t[2]=h*o*a-l*s,t[3]=0,t[4]=o*l*a-h*s,t[5]=l*l*a+r,t[6]=h*l*a+o*s,t[7]=0,t[8]=o*h*a+l*s,t[9]=l*h*a-o*s,t[10]=h*h*a+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}var E=function(t,e,i,n,s,r,a){var o=1/(e-i),l=1/(n-s),h=1/(r-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+i)*o,t[13]=(s+n)*l,t[14]=(a+r)*h,t[15]=1,t};function m(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}var I=c},333:(t,e,i)=>{"use strict";i.d(e,{Bw:()=>a,S8:()=>o,fA:()=>s,hs:()=>r});var n=i(3172);function s(t,e){var i=new n.tb(2);return i[0]=t,i[1]=e,i}function r(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function a(t){var e=t[0],i=t[1];return Math.hypot(e,i)}function o(t,e){var i=e[0],n=e[1],s=i*i+n*n;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t}var l,h;l=new n.tb(2),n.tb!=Float32Array&&(l[0]=0,l[1]=0),h=l},4062:(t,e,i)=>{"use strict";i.d(e,{$A:()=>g,Bw:()=>a,C:()=>l,Cc:()=>E,Il:()=>p,Re:()=>f,S8:()=>A,T9:()=>d,WQ:()=>h,fA:()=>o,g7:()=>m,hs:()=>u,jb:()=>x,jk:()=>c,o8:()=>r,vt:()=>s,ze:()=>_});var n=i(3172);function s(){var t=new n.tb(3);return n.tb!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function r(t){var e=new n.tb(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],i=t[1],n=t[2];return Math.hypot(e,i,n)}function o(t,e,i){var s=new n.tb(3);return s[0]=t,s[1]=e,s[2]=i,s}function l(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function h(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function f(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function c(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function d(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function u(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function _(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function A(t,e){var i=e[0],n=e[1],s=e[2],r=i*i+n*n+s*s;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function g(t,e,i){var n=e[0],s=e[1],r=e[2],a=i[0],o=i[1],l=i[2];return t[0]=s*l-r*o,t[1]=r*a-n*l,t[2]=n*o-s*a,t}function E(t,e,i,n){var s=e[0],r=e[1],a=e[2];return t[0]=s+n*(i[0]-s),t[1]=r+n*(i[1]-r),t[2]=a+n*(i[2]-a),t}function m(t,e){var i=t[0],n=t[1],s=t[2],r=e[0],a=e[1],o=e[2],l=Math.sqrt(i*i+n*n+s*s)*Math.sqrt(r*r+a*a+o*o),h=l&&function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}(t,e)/l;return Math.acos(Math.min(Math.max(h,-1),1))}var I,x=f,p=a;I=s()},911:(t,e,i)=>{"use strict";i.d(e,{WQ:()=>o,Z0:()=>h,fA:()=>a,hs:()=>l,jb:()=>c,o8:()=>r,vt:()=>s});var n=i(3172);function s(){var t=new n.tb(4);return n.tb!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function r(t){var e=new n.tb(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e,i,s){var r=new n.tb(4);return r[0]=t,r[1]=e,r[2]=i,r[3]=s,r}function o(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function l(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function h(t,e,i){var n=e[0],s=e[1],r=e[2],a=e[3];return t[0]=i[0]*n+i[4]*s+i[8]*r+i[12]*a,t[1]=i[1]*n+i[5]*s+i[9]*r+i[13]*a,t[2]=i[2]*n+i[6]*s+i[10]*r+i[14]*a,t[3]=i[3]*n+i[7]*s+i[11]*r+i[15]*a,t}var f,c=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t};f=s()},9659:(t,e,i)=>{"use strict";i.d(e,{v4:()=>a});for(var n,s=256,r=[];s--;)r[s]=(s+256).toString(16).substring(1);function a(){var t,e=0,i="";if(!n||s+16>256){for(n=Array(e=256);e--;)n[e]=256*Math.random()|0;e=s=0}for(;e<16;e++)t=n[s+e],i+=6==e?r[15&t|64]:8==e?r[63&t|128]:r[t],1&e&&e>1&&e<11&&(i+="-");return s++,i}},4882:(t,e,i)=>{"use strict";i.d(e,{iu:()=>s,lK:()=>f});const n="object"==typeof self?self:globalThis,s=t=>((t,e)=>{const i=(e,i)=>(t.set(i,e),e),s=r=>{if(t.has(r))return t.get(r);const[a,o]=e[r];switch(a){case 0:case-1:return i(o,r);case 1:{const t=i([],r);for(const e of o)t.push(s(e));return t}case 2:{const t=i({},r);for(const[e,i]of o)t[s(e)]=s(i);return t}case 3:return i(new Date(o),r);case 4:{const{source:t,flags:e}=o;return i(new RegExp(t,e),r)}case 5:{const t=i(new Map,r);for(const[e,i]of o)t.set(s(e),s(i));return t}case 6:{const t=i(new Set,r);for(const e of o)t.add(s(e));return t}case 7:{const{name:t,message:e}=o;return i(new n[t](e),r)}case 8:return i(BigInt(o),r);case"BigInt":return i(Object(BigInt(o)),r)}return i(new n[a](o),r)};return s})(new Map,t)(0),r="",{toString:a}={},{keys:o}=Object,l=t=>{const e=typeof t;if("object"!==e||!t)return[0,e];const i=a.call(t).slice(8,-1);switch(i){case"Array":return[1,r];case"Object":return[2,r];case"Date":return[3,r];case"RegExp":return[4,r];case"Map":return[5,r];case"Set":return[6,r]}return i.includes("Array")?[1,i]:i.includes("Error")?[7,i]:[2,i]},h=([t,e])=>0===t&&("function"===e||"symbol"===e),f=(t,{json:e,lossy:i}={})=>{const n=[];return((t,e,i,n)=>{const s=(t,e)=>{const s=n.push(t)-1;return i.set(e,s),s},r=n=>{if(i.has(n))return i.get(n);let[a,f]=l(n);switch(a){case 0:{let e=n;switch(f){case"bigint":a=8,e=n.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);e=null;break;case"undefined":return s([-1],n)}return s([a,e],n)}case 1:{if(f)return s([f,[...n]],n);const t=[],e=s([a,t],n);for(const i of n)t.push(r(i));return e}case 2:{if(f)switch(f){case"BigInt":return s([f,n.toString()],n);case"Boolean":case"Number":case"String":return s([f,n.valueOf()],n)}if(e&&"toJSON"in n)return r(n.toJSON());const i=[],c=s([a,i],n);for(const e of o(n))!t&&h(l(n[e]))||i.push([r(e),r(n[e])]);return c}case 3:return s([a,n.toISOString()],n);case 4:{const{source:t,flags:e}=n;return s([a,{source:t,flags:e}],n)}case 5:{const e=[],i=s([a,e],n);for(const[s,a]of n)(t||!h(l(s))&&!h(l(a)))&&e.push([r(s),r(a)]);return i}case 6:{const e=[],i=s([a,e],n);for(const s of n)!t&&h(l(s))||e.push(r(s));return i}}const{message:c}=n;return s([a,{name:f,message:c}],n)};return r})(!(e||i),!!e,new Map,n)(t),n}},4990:(t,e,i)=>{"use strict";i.d(e,{s:()=>n});class n{esize;ecode;edata;littleEndian;constructor(t,e,i,n){if(t%16!=0)throw new Error("This does not appear to be a NIFTI extension");this.esize=t,this.ecode=e,this.edata=i,this.littleEndian=n}toArrayBuffer(){let t=new Uint8Array(this.esize),e=new Uint8Array(this.edata);t.set(e,8);let i=new DataView(t.buffer);return i.setInt32(0,this.esize,this.littleEndian),i.setInt32(4,this.ecode,this.littleEndian),t.buffer}}},7582:(t,e,i)=>{"use strict";i.d(e,{Sz:()=>X,cx:()=>K,ay:()=>Z,AM:()=>Q});var n=Uint8Array,s=Uint16Array,r=Int32Array,a=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=function(t,e){for(var i=new s(31),n=0;n<31;++n)i[n]=e+=1<<t[n-1];var a=new r(i[30]);for(n=1;n<30;++n)for(var o=i[n];o<i[n+1];++o)a[o]=o-i[n]<<5|n;return{b:i,r:a}},f=h(a,2),c=f.b,d=f.r;c[28]=258,d[258]=28;for(var u=h(o,0),_=u.b,A=(u.r,new s(32768)),g=0;g<32768;++g){var E=(43690&g)>>1|(21845&g)<<1;E=(61680&(E=(52428&E)>>2|(13107&E)<<2))>>4|(3855&E)<<4,A[g]=((65280&E)>>8|(255&E)<<8)>>1}var m=function(t,e,i){for(var n=t.length,r=0,a=new s(e);r<n;++r)t[r]&&++a[t[r]-1];var o,l=new s(e);for(r=1;r<e;++r)l[r]=l[r-1]+a[r-1]<<1;if(i){o=new s(1<<e);var h=15-e;for(r=0;r<n;++r)if(t[r])for(var f=r<<4|t[r],c=e-t[r],d=l[t[r]-1]++<<c,u=d|(1<<c)-1;d<=u;++d)o[A[d]>>h]=f}else for(o=new s(n),r=0;r<n;++r)t[r]&&(o[r]=A[l[t[r]-1]++]>>15-t[r]);return o},I=new n(288);for(g=0;g<144;++g)I[g]=8;for(g=144;g<256;++g)I[g]=9;for(g=256;g<280;++g)I[g]=7;for(g=280;g<288;++g)I[g]=8;var x=new n(32);for(g=0;g<32;++g)x[g]=5;var p=m(I,9,1),M=m(x,5,1),S=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},v=function(t,e,i){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(7&e)&i},y=function(t,e){var i=e/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(7&e)},T=function(t){return(t+7)/8|0},b=function(t,e,i){return(null==e||e<0)&&(e=0),(null==i||i>t.length)&&(i=t.length),new n(t.subarray(e,i))},C=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],N=function(t,e,i){var n=new Error(e||C[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,N),!i)throw n;return n},F=function(t,e,i,s){var r=t.length,h=s?s.length:0;if(!r||e.f&&!e.l)return i||new n(0);var f=!i,d=f||2!=e.i,u=e.i;f&&(i=new n(3*r));var A=function(t){var e=i.length;if(t>e){var s=new n(Math.max(2*e,t));s.set(i),i=s}},g=e.f||0,E=e.p||0,I=e.b||0,x=e.l,C=e.d,F=e.m,w=e.n,U=8*r;do{if(!x){g=v(t,E,1);var D=v(t,E+1,3);if(E+=3,!D){var q=t[(V=T(E)+4)-4]|t[V-3]<<8,B=V+q;if(B>r){u&&N(0);break}d&&A(I+q),i.set(t.subarray(V,B),I),e.b=I+=q,e.p=E=8*B,e.f=g;continue}if(1==D)x=p,C=M,F=9,w=5;else if(2==D){var O=v(t,E,31)+257,R=v(t,E+10,15)+4,P=O+v(t,E+5,31)+1;E+=14;for(var z=new n(P),G=new n(19),k=0;k<R;++k)G[l[k]]=v(t,E+3*k,7);E+=3*R;var L=S(G),Y=(1<<L)-1,K=m(G,L,1);for(k=0;k<P;){var V,X=K[v(t,E,Y)];if(E+=15&X,(V=X>>4)<16)z[k++]=V;else{var Z=0,Q=0;for(16==V?(Q=3+v(t,E,3),E+=2,Z=z[k-1]):17==V?(Q=3+v(t,E,7),E+=3):18==V&&(Q=11+v(t,E,127),E+=7);Q--;)z[k++]=Z}}var H=z.subarray(0,O),j=z.subarray(O);F=S(H),w=S(j),x=m(H,F,1),C=m(j,w,1)}else N(1);if(E>U){u&&N(0);break}}d&&A(I+131072);for(var W=(1<<F)-1,J=(1<<w)-1,$=E;;$=E){var tt=(Z=x[y(t,E)&W])>>4;if((E+=15&Z)>U){u&&N(0);break}if(Z||N(2),tt<256)i[I++]=tt;else{if(256==tt){$=E,x=null;break}var et=tt-254;if(tt>264){var it=a[k=tt-257];et=v(t,E,(1<<it)-1)+c[k],E+=it}var nt=C[y(t,E)&J],st=nt>>4;nt||N(3),E+=15&nt;j=_[st];if(st>3){it=o[st];j+=y(t,E)&(1<<it)-1,E+=it}if(E>U){u&&N(0);break}d&&A(I+131072);var rt=I+et;if(I<j){var at=h-j,ot=Math.min(j,rt);for(at+I<0&&N(3);I<ot;++I)i[I]=s[at+I]}for(;I<rt;++I)i[I]=i[I-j]}}e.l=x,e.p=$,e.b=I,e.f=g,x&&(g=1,e.m=F,e.d=C,e.n=w)}while(!g);return I!=i.length&&f?b(i,0,I):i.subarray(0,I)},w=new n(0),U=function(t){31==t[0]&&139==t[1]&&8==t[2]||N(6,"invalid gzip data");var e=t[3],i=10;4&e&&(i+=2+(t[10]|t[11]<<8));for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!t[i++]);return i+(2&e)},D=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},q=function(t,e){return(8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31)&&N(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&N(6,"invalid zlib data: "+(32&t[1]?"need":"unexpected")+" dictionary"),2+(t[1]>>3&4)};function B(t,e){return F(t,{i:2},e&&e.out,e&&e.dictionary)}function O(t,e){var i=U(t);return i+8>t.length&&N(6,"invalid gzip data"),F(t.subarray(i,-8),{i:2},e&&e.out||new n(D(t)),e&&e.dictionary)}function R(t,e){return F(t.subarray(q(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var P="undefined"!=typeof TextDecoder&&new TextDecoder;try{P.decode(w,{stream:!0})}catch(H){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var z=i(2859),G=i(5976);class k{littleEndian=!1;dim_info=0;dims=[];intent_p1=0;intent_p2=0;intent_p3=0;intent_code=0;datatypeCode=0;numBitsPerVoxel=0;slice_start=0;slice_end=0;slice_code=0;pixDims=[];vox_offset=0;scl_slope=1;scl_inter=0;xyzt_units=0;cal_max=0;cal_min=0;slice_duration=0;toffset=0;description="";aux_file="";intent_name="";qform_code=0;sform_code=0;quatern_b=0;quatern_c=0;quatern_d=0;qoffset_x=0;qoffset_y=0;qoffset_z=0;affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];magic="0";extensionFlag=[0,0,0,0];extensions=[];extensionSize=0;extensionCode=0;static MAGIC_COOKIE=540;static MAGIC_NUMBER_LOCATION=4;static MAGIC_NUMBER=[110,43,50,0,13,10,26,10];static MAGIC_NUMBER2=[110,105,50,0,13,10,26,10];readHeader(t){var e,i,n,s,r=new DataView(t),a=G.A.getIntAt(r,0,this.littleEndian);if(a!==k.MAGIC_COOKIE&&(this.littleEndian=!0,a=G.A.getIntAt(r,0,this.littleEndian)),a!==k.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.magic=G.A.getStringAt(r,4,12),this.datatypeCode=G.A.getShortAt(r,12,this.littleEndian),this.numBitsPerVoxel=G.A.getShortAt(r,14,this.littleEndian),e=0;e<8;e+=1)s=16+8*e,this.dims[e]=G.A.getInt64At(r,s,this.littleEndian);for(this.intent_p1=G.A.getDoubleAt(r,80,this.littleEndian),this.intent_p2=G.A.getDoubleAt(r,88,this.littleEndian),this.intent_p3=G.A.getDoubleAt(r,96,this.littleEndian),e=0;e<8;e+=1)s=104+8*e,this.pixDims[e]=G.A.getDoubleAt(r,s,this.littleEndian);for(this.vox_offset=G.A.getInt64At(r,168,this.littleEndian),this.scl_slope=G.A.getDoubleAt(r,176,this.littleEndian),this.scl_inter=G.A.getDoubleAt(r,184,this.littleEndian),this.cal_max=G.A.getDoubleAt(r,192,this.littleEndian),this.cal_min=G.A.getDoubleAt(r,200,this.littleEndian),this.slice_duration=G.A.getDoubleAt(r,208,this.littleEndian),this.toffset=G.A.getDoubleAt(r,216,this.littleEndian),this.slice_start=G.A.getInt64At(r,224,this.littleEndian),this.slice_end=G.A.getInt64At(r,232,this.littleEndian),this.description=G.A.getStringAt(r,240,320),this.aux_file=G.A.getStringAt(r,320,344),this.qform_code=G.A.getIntAt(r,344,this.littleEndian),this.sform_code=G.A.getIntAt(r,348,this.littleEndian),this.quatern_b=G.A.getDoubleAt(r,352,this.littleEndian),this.quatern_c=G.A.getDoubleAt(r,360,this.littleEndian),this.quatern_d=G.A.getDoubleAt(r,368,this.littleEndian),this.qoffset_x=G.A.getDoubleAt(r,376,this.littleEndian),this.qoffset_y=G.A.getDoubleAt(r,384,this.littleEndian),this.qoffset_z=G.A.getDoubleAt(r,392,this.littleEndian),i=0;i<3;i+=1)for(n=0;n<4;n+=1)s=400+8*(4*i+n),this.affine[i][n]=G.A.getDoubleAt(r,s,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=G.A.getIntAt(r,496,this.littleEndian),this.xyzt_units=G.A.getIntAt(r,500,this.littleEndian),this.intent_code=G.A.getIntAt(r,504,this.littleEndian),this.intent_name=G.A.getStringAt(r,508,524),this.dim_info=G.A.getByteAt(r,524),r.byteLength>k.MAGIC_COOKIE&&(this.extensionFlag[0]=G.A.getByteAt(r,540),this.extensionFlag[1]=G.A.getByteAt(r,541),this.extensionFlag[2]=G.A.getByteAt(r,542),this.extensionFlag[3]=G.A.getByteAt(r,543),this.extensionFlag[0]&&(this.extensions=G.A.getExtensionsAt(r,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode))}toFormattedString(){var t=G.A.formatNumber,e="";return e+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",e+="Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n",e+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",e+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",e+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+"\n",e+="Image Offset = "+this.vox_offset+"\n",e+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+"\n",e+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+"\n",e+="Slice Duration = "+this.slice_duration+"\n",e+="Time Axis Shift = "+this.toffset+"\n",e+="Slice Start = "+this.slice_start+"\n",e+="Slice End = "+this.slice_end+"\n",e+='Description: "'+this.description+'"\n',e+='Auxiliary File: "'+this.aux_file+'"\n',e+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",e+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",e+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+"\n",e+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",e+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+"\n",e+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+"\n",e+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+"\n",e+="Slice Code = "+this.slice_code+"\n",e+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(z.a.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(z.a.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",e+="Intent Code = "+this.intent_code+"\n",e+='Intent Name: "'+this.intent_name+'"\n',e+="Dim Info = "+this.dim_info+"\n"}getExtensionLocation=function(){return k.MAGIC_COOKIE+4};getExtensionSize=z.a.prototype.getExtensionSize;getExtensionCode=z.a.prototype.getExtensionCode;addExtension=z.a.prototype.addExtension;removeExtension=z.a.prototype.removeExtension;getDatatypeCodeString=z.a.prototype.getDatatypeCodeString;getTransformCodeString=z.a.prototype.getTransformCodeString;getUnitsCodeString=z.a.prototype.getUnitsCodeString;getQformMat=z.a.prototype.getQformMat;convertNiftiQFormToNiftiSForm=z.a.prototype.convertNiftiQFormToNiftiSForm;convertNiftiSFormToNEMA=z.a.prototype.convertNiftiSFormToNEMA;nifti_mat33_mul=z.a.prototype.nifti_mat33_mul;nifti_mat33_determ=z.a.prototype.nifti_mat33_determ;toArrayBuffer(t=!1){let e=544;if(t)for(let r of this.extensions)e+=r.esize;let i=new Uint8Array(e),n=new DataView(i.buffer);n.setInt32(0,540,this.littleEndian),i.set((new TextEncoder).encode(this.magic),4),n.setInt16(12,this.datatypeCode,this.littleEndian),n.setInt16(14,this.numBitsPerVoxel,this.littleEndian);for(let r=0;r<8;r++)n.setBigInt64(16+8*r,BigInt(this.dims[r]),this.littleEndian);n.setFloat64(80,this.intent_p1,this.littleEndian),n.setFloat64(88,this.intent_p2,this.littleEndian),n.setFloat64(96,this.intent_p3,this.littleEndian);for(let r=0;r<8;r++)n.setFloat64(104+8*r,this.pixDims[r],this.littleEndian);n.setBigInt64(168,BigInt(this.vox_offset),this.littleEndian),n.setFloat64(176,this.scl_slope,this.littleEndian),n.setFloat64(184,this.scl_inter,this.littleEndian),n.setFloat64(192,this.cal_max,this.littleEndian),n.setFloat64(200,this.cal_min,this.littleEndian),n.setFloat64(208,this.slice_duration,this.littleEndian),n.setFloat64(216,this.toffset,this.littleEndian),n.setBigInt64(224,BigInt(this.slice_start),this.littleEndian),n.setBigInt64(232,BigInt(this.slice_end),this.littleEndian),i.set((new TextEncoder).encode(this.description),240),i.set((new TextEncoder).encode(this.aux_file),320),n.setInt32(344,this.qform_code,this.littleEndian),n.setInt32(348,this.sform_code,this.littleEndian),n.setFloat64(352,this.quatern_b,this.littleEndian),n.setFloat64(360,this.quatern_c,this.littleEndian),n.setFloat64(368,this.quatern_d,this.littleEndian),n.setFloat64(376,this.qoffset_x,this.littleEndian),n.setFloat64(384,this.qoffset_y,this.littleEndian),n.setFloat64(392,this.qoffset_z,this.littleEndian);const s=this.affine.flat();for(let r=0;r<12;r++)n.setFloat64(400+8*r,s[r],this.littleEndian);if(n.setInt32(496,this.slice_code,this.littleEndian),n.setInt32(500,this.xyzt_units,this.littleEndian),n.setInt32(504,this.intent_code,this.littleEndian),i.set((new TextEncoder).encode(this.intent_name),508),n.setUint8(524,this.dim_info),t){i.set(Uint8Array.from([1,0,0,0]),540);let t=this.getExtensionLocation();for(const e of this.extensions)n.setInt32(t,e.esize,e.littleEndian),n.setInt32(t+4,e.ecode,e.littleEndian),i.set(new Uint8Array(e.edata),t+8),t+=e.esize}else i.set(new Uint8Array(4).fill(0),540);return i.buffer}}function L(t,e=!1){var i,n,s,r;return!(t.byteLength<z.a.STANDARD_HEADER_SIZE)&&((i=new DataView(t))&&(n=i.getUint8(z.a.MAGIC_NUMBER_LOCATION)),s=i.getUint8(z.a.MAGIC_NUMBER_LOCATION+1),r=i.getUint8(z.a.MAGIC_NUMBER_LOCATION+2),!(!e||n!==z.a.MAGIC_NUMBER2[0]||s!==z.a.MAGIC_NUMBER2[1]||r!==z.a.MAGIC_NUMBER2[2])||!(n!==z.a.MAGIC_NUMBER[0]||s!==z.a.MAGIC_NUMBER[1]||r!==z.a.MAGIC_NUMBER[2]))}function Y(t,e=!1){var i,n,s,r;return!(t.byteLength<z.a.STANDARD_HEADER_SIZE)&&(n=(i=new DataView(t)).getUint8(k.MAGIC_NUMBER_LOCATION),s=i.getUint8(k.MAGIC_NUMBER_LOCATION+1),r=i.getUint8(k.MAGIC_NUMBER_LOCATION+2),!(!e||n!==k.MAGIC_NUMBER2[0]||s!==k.MAGIC_NUMBER2[1]||r!==k.MAGIC_NUMBER2[2])||!(n!==k.MAGIC_NUMBER[0]||s!==k.MAGIC_NUMBER[1]||r!==k.MAGIC_NUMBER[2]))}function K(t){var e,i,n;if(t){if(i=(e=new DataView(t)).getUint8(0),n=e.getUint8(1),i===G.A.GUNZIP_MAGIC_COOKIE1)return!0;if(n===G.A.GUNZIP_MAGIC_COOKIE2)return!0}return!1}function V(t){return function(t,e){return 31==t[0]&&139==t[1]&&8==t[2]?O(t,e):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?B(t,e):R(t,e)}(new Uint8Array(t)).buffer}async function X(t){const e=new Uint8Array(t),i=31===e[0]&&139===e[1]&&8===e[2]?"gzip":120!==e[0]||1!==e[1]&&94!==e[1]&&156!==e[1]&&218!==e[1]?"deflate-raw":"deflate",n=new DecompressionStream(i),s=n.writable.getWriter();s.write(e).catch(console.error);const r=s.close().catch(console.error),a=new Response(n.readable),o=await a.arrayBuffer();return await r,o}function Z(t,e=!1){let i=null;if(K(t)&&(t=V(t)),L(t,e)?i=new z.a:Y(t,e)&&(i=new k),!i)throw new Error("That file does not appear to be NIFTI!");return i.readHeader(t),i}function Q(t,e){var i=t.vox_offset,n=1,s=1;t.dims[4]&&(n=t.dims[4]),t.dims[5]&&(s=t.dims[5]);var r=t.dims[1]*t.dims[2]*t.dims[3]*n*s*(t.numBitsPerVoxel/8);return e.slice(i,i+r)}},2859:(t,e,i)=>{"use strict";i.d(e,{a:()=>s});var n=i(5976);class s{littleEndian=!1;dim_info=0;dims=[];intent_p1=0;intent_p2=0;intent_p3=0;intent_code=0;datatypeCode=0;numBitsPerVoxel=0;slice_start=0;slice_end=0;slice_code=0;pixDims=[];vox_offset=0;scl_slope=1;scl_inter=0;xyzt_units=0;cal_max=0;cal_min=0;slice_duration=0;toffset=0;description="";aux_file="";intent_name="";qform_code=0;sform_code=0;quatern_a=0;quatern_b=0;quatern_c=0;quatern_d=0;qoffset_x=0;qoffset_y=0;qoffset_z=0;affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];qfac=1;quatern_R;magic="0";isHDR=!1;extensionFlag=[0,0,0,0];extensionSize=0;extensionCode=0;extensions=[];static TYPE_NONE=0;static TYPE_BINARY=1;static TYPE_UINT8=2;static TYPE_INT16=4;static TYPE_INT32=8;static TYPE_FLOAT32=16;static TYPE_COMPLEX64=32;static TYPE_FLOAT64=64;static TYPE_RGB24=128;static TYPE_INT8=256;static TYPE_UINT16=512;static TYPE_UINT32=768;static TYPE_INT64=1024;static TYPE_UINT64=1280;static TYPE_FLOAT128=1536;static TYPE_COMPLEX128=1792;static TYPE_COMPLEX256=2048;static XFORM_UNKNOWN=0;static XFORM_SCANNER_ANAT=1;static XFORM_ALIGNED_ANAT=2;static XFORM_TALAIRACH=3;static XFORM_MNI_152=4;static SPATIAL_UNITS_MASK=7;static TEMPORAL_UNITS_MASK=56;static UNITS_UNKNOWN=0;static UNITS_METER=1;static UNITS_MM=2;static UNITS_MICRON=3;static UNITS_SEC=8;static UNITS_MSEC=16;static UNITS_USEC=24;static UNITS_HZ=32;static UNITS_PPM=40;static UNITS_RADS=48;static MAGIC_COOKIE=348;static STANDARD_HEADER_SIZE=348;static MAGIC_NUMBER_LOCATION=344;static MAGIC_NUMBER=[110,43,49];static MAGIC_NUMBER2=[110,105,49];static EXTENSION_HEADER_SIZE=8;readHeader(t){var e,i,r,a,o=new DataView(t),l=n.A.getIntAt(o,0,this.littleEndian);if(l!==s.MAGIC_COOKIE&&(this.littleEndian=!0,l=n.A.getIntAt(o,0,this.littleEndian)),l!==s.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=n.A.getByteAt(o,39),e=0;e<8;e+=1)a=40+2*e,this.dims[e]=n.A.getShortAt(o,a,this.littleEndian);for(this.intent_p1=n.A.getFloatAt(o,56,this.littleEndian),this.intent_p2=n.A.getFloatAt(o,60,this.littleEndian),this.intent_p3=n.A.getFloatAt(o,64,this.littleEndian),this.intent_code=n.A.getShortAt(o,68,this.littleEndian),this.datatypeCode=n.A.getShortAt(o,70,this.littleEndian),this.numBitsPerVoxel=n.A.getShortAt(o,72,this.littleEndian),this.slice_start=n.A.getShortAt(o,74,this.littleEndian),e=0;e<8;e+=1)a=76+4*e,this.pixDims[e]=n.A.getFloatAt(o,a,this.littleEndian);if(this.vox_offset=n.A.getFloatAt(o,108,this.littleEndian),this.scl_slope=n.A.getFloatAt(o,112,this.littleEndian),this.scl_inter=n.A.getFloatAt(o,116,this.littleEndian),this.slice_end=n.A.getShortAt(o,120,this.littleEndian),this.slice_code=n.A.getByteAt(o,122),this.xyzt_units=n.A.getByteAt(o,123),this.cal_max=n.A.getFloatAt(o,124,this.littleEndian),this.cal_min=n.A.getFloatAt(o,128,this.littleEndian),this.slice_duration=n.A.getFloatAt(o,132,this.littleEndian),this.toffset=n.A.getFloatAt(o,136,this.littleEndian),this.description=n.A.getStringAt(o,148,228),this.aux_file=n.A.getStringAt(o,228,252),this.qform_code=n.A.getShortAt(o,252,this.littleEndian),this.sform_code=n.A.getShortAt(o,254,this.littleEndian),this.quatern_b=n.A.getFloatAt(o,256,this.littleEndian),this.quatern_c=n.A.getFloatAt(o,260,this.littleEndian),this.quatern_d=n.A.getFloatAt(o,264,this.littleEndian),this.quatern_a=Math.sqrt(1-(Math.pow(this.quatern_b,2)+Math.pow(this.quatern_c,2)+Math.pow(this.quatern_d,2))),this.qoffset_x=n.A.getFloatAt(o,268,this.littleEndian),this.qoffset_y=n.A.getFloatAt(o,272,this.littleEndian),this.qoffset_z=n.A.getFloatAt(o,276,this.littleEndian),this.qform_code<1&&this.sform_code<1&&(this.affine[0][0]=this.pixDims[1],this.affine[1][1]=this.pixDims[2],this.affine[2][2]=this.pixDims[3]),this.qform_code>0&&this.sform_code<this.qform_code){const t=this.quatern_a,e=this.quatern_b,n=this.quatern_c,s=this.quatern_d;for(this.qfac=0===this.pixDims[0]?1:this.pixDims[0],this.quatern_R=[[t*t+e*e-n*n-s*s,2*e*n-2*t*s,2*e*s+2*t*n],[2*e*n+2*t*s,t*t+n*n-e*e-s*s,2*n*s-2*t*e],[2*e*s-2*t*n,2*n*s+2*t*e,t*t+s*s-n*n-e*e]],i=0;i<3;i+=1)for(r=0;r<3;r+=1)this.affine[i][r]=this.quatern_R[i][r]*this.pixDims[r+1],2===r&&(this.affine[i][r]*=this.qfac);this.affine[0][3]=this.qoffset_x,this.affine[1][3]=this.qoffset_y,this.affine[2][3]=this.qoffset_z}else if(this.sform_code>0)for(i=0;i<3;i+=1)for(r=0;r<4;r+=1)a=280+4*(4*i+r),this.affine[i][r]=n.A.getFloatAt(o,a,this.littleEndian);if(this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=n.A.getStringAt(o,328,344),this.magic=n.A.getStringAt(o,344,348),this.isHDR=this.magic===String.fromCharCode.apply(null,s.MAGIC_NUMBER2),o.byteLength>s.MAGIC_COOKIE){this.extensionFlag[0]=n.A.getByteAt(o,348),this.extensionFlag[1]=n.A.getByteAt(o,349),this.extensionFlag[2]=n.A.getByteAt(o,350),this.extensionFlag[3]=n.A.getByteAt(o,351);let t=!0;!this.isHDR&&this.vox_offset<=352&&(t=!1),o.byteLength<=368&&(t=!1),t&&this.extensionFlag[0]&&(this.extensions=n.A.getExtensionsAt(o,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode)}}toFormattedString(){var t=n.A.formatNumber,e="";return e+="Dim Info = "+this.dim_info+"\n",e+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",e+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",e+="Intent Code = "+this.intent_code+"\n",e+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",e+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n",e+="Slice Start = "+this.slice_start+"\n",e+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+"\n",e+="Image Offset = "+this.vox_offset+"\n",e+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+"\n",e+="Slice End = "+this.slice_end+"\n",e+="Slice Code = "+this.slice_code+"\n",e+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(s.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(s.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",e+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+"\n",e+="Slice Duration = "+this.slice_duration+"\n",e+="Time Axis Shift = "+this.toffset+"\n",e+='Description: "'+this.description+'"\n',e+='Auxiliary File: "'+this.aux_file+'"\n',e+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",e+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",e+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+"\n",e+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",e+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+"\n",e+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+"\n",e+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+"\n",e+='Intent Name: "'+this.intent_name+'"\n',this.extensionFlag[0]&&(e+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n"),e}getDatatypeCodeString=function(t){return t===s.TYPE_UINT8?"1-Byte Unsigned Integer":t===s.TYPE_INT16?"2-Byte Signed Integer":t===s.TYPE_INT32?"4-Byte Signed Integer":t===s.TYPE_FLOAT32?"4-Byte Float":t===s.TYPE_FLOAT64?"8-Byte Float":t===s.TYPE_RGB24?"RGB":t===s.TYPE_INT8?"1-Byte Signed Integer":t===s.TYPE_UINT16?"2-Byte Unsigned Integer":t===s.TYPE_UINT32?"4-Byte Unsigned Integer":t===s.TYPE_INT64?"8-Byte Signed Integer":t===s.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"};getTransformCodeString=function(t){return t===s.XFORM_SCANNER_ANAT?"Scanner":t===s.XFORM_ALIGNED_ANAT?"Aligned":t===s.XFORM_TALAIRACH?"Talairach":t===s.XFORM_MNI_152?"MNI":"Unknown"};getUnitsCodeString=function(t){return t===s.UNITS_METER?"Meters":t===s.UNITS_MM?"Millimeters":t===s.UNITS_MICRON?"Microns":t===s.UNITS_SEC?"Seconds":t===s.UNITS_MSEC?"Milliseconds":t===s.UNITS_USEC?"Microseconds":t===s.UNITS_HZ?"Hz":t===s.UNITS_PPM?"PPM":t===s.UNITS_RADS?"Rads":"Unknown"};getQformMat(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])}convertNiftiQFormToNiftiSForm(t,e,i,n,s,r,a,o,l,h){var f,c,d,u,_=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],A=t,g=e,E=i;return _[3][0]=_[3][1]=_[3][2]=0,_[3][3]=1,(f=1-(A*A+g*g+E*E))<1e-7?(A*=f=1/Math.sqrt(A*A+g*g+E*E),g*=f,E*=f,f=0):f=Math.sqrt(f),c=a>0?a:1,d=o>0?o:1,u=l>0?l:1,h<0&&(u=-u),_[0][0]=(f*f+A*A-g*g-E*E)*c,_[0][1]=2*(A*g-f*E)*d,_[0][2]=2*(A*E+f*g)*u,_[1][0]=2*(A*g+f*E)*c,_[1][1]=(f*f+g*g-A*A-E*E)*d,_[1][2]=2*(g*E-f*A)*u,_[2][0]=2*(A*E-f*g)*c,_[2][1]=2*(g*E+f*A)*d,_[2][2]=(f*f+E*E-g*g-A*A)*u,_[0][3]=n,_[1][3]=s,_[2][3]=r,_}convertNiftiSFormToNEMA(t){var e,i,n,s,r,a,o,l,h,f,c,d,u,_,A,g,E,m,I,x,p,M,S,v,y,T,b,C,N,F,w,U,D;if(_=0,T=[[0,0,0],[0,0,0],[0,0,0]],b=[[0,0,0],[0,0,0],[0,0,0]],e=t[0][0],i=t[0][1],n=t[0][2],s=t[1][0],r=t[1][1],a=t[1][2],o=t[2][0],l=t[2][1],h=t[2][2],0===(f=Math.sqrt(e*e+s*s+o*o)))return null;if(e/=f,s/=f,o/=f,0===(f=Math.sqrt(i*i+r*r+l*l)))return null;if(f=e*(i/=f)+s*(r/=f)+o*(l/=f),Math.abs(f)>1e-4){if(i-=f*e,r-=f*s,l-=f*o,0===(f=Math.sqrt(i*i+r*r+l*l)))return null;i/=f,r/=f,l/=f}if(0===(f=Math.sqrt(n*n+a*a+h*h))?(n=s*l-o*r,a=o*i-l*e,h=e*r-s*i):(n/=f,a/=f,h/=f),f=e*n+s*a+o*h,Math.abs(f)>1e-4){if(n-=f*e,a-=f*s,h-=f*o,0===(f=Math.sqrt(n*n+a*a+h*h)))return null;n/=f,a/=f,h/=f}if(f=i*n+r*a+l*h,Math.abs(f)>1e-4){if(n-=f*i,a-=f*r,h-=f*l,0===(f=Math.sqrt(n*n+a*a+h*h)))return null;n/=f,a/=f,h/=f}if(T[0][0]=e,T[0][1]=i,T[0][2]=n,T[1][0]=s,T[1][1]=r,T[1][2]=a,T[2][0]=o,T[2][1]=l,T[2][2]=h,0===(c=this.nifti_mat33_determ(T)))return null;for(y=-666,m=p=M=S=1,I=2,x=3,d=1;d<=3;d+=1)for(u=1;u<=3;u+=1)if(d!==u)for(_=1;_<=3;_+=1)if(d!==_&&u!==_)for(b[0][0]=b[0][1]=b[0][2]=b[1][0]=b[1][1]=b[1][2]=b[2][0]=b[2][1]=b[2][2]=0,A=-1;A<=1;A+=2)for(g=-1;g<=1;g+=2)for(E=-1;E<=1;E+=2)b[0][d-1]=A,b[1][u-1]=g,b[2][_-1]=E,this.nifti_mat33_determ(b)*c>0&&(f=(v=this.nifti_mat33_mul(b,T))[0][0]+v[1][1]+v[2][2])>y&&(y=f,m=d,I=u,x=_,p=A,M=g,S=E);switch(C=N=F=w=U=D="",m*p){case 1:C="X",w="+";break;case-1:C="X",w="-";break;case 2:C="Y",w="+";break;case-2:C="Y",w="-";break;case 3:C="Z",w="+";break;case-3:C="Z",w="-"}switch(I*M){case 1:N="X",U="+";break;case-1:N="X",U="-";break;case 2:N="Y",U="+";break;case-2:N="Y",U="-";break;case 3:N="Z",U="+";break;case-3:N="Z",U="-"}switch(x*S){case 1:F="X",D="+";break;case-1:F="X",D="-";break;case 2:F="Y",D="+";break;case-2:F="Y",D="-";break;case 3:F="Z",D="+";break;case-3:F="Z",D="-"}return C+N+F+w+U+D}nifti_mat33_mul=function(t,e){var i,n,s=[[0,0,0],[0,0,0],[0,0,0]];for(i=0;i<3;i+=1)for(n=0;n<3;n+=1)s[i][n]=t[i][0]*e[0][n]+t[i][1]*e[1][n]+t[i][2]*e[2][n];return s};nifti_mat33_determ=function(t){var e,i,n,s,r,a,o,l,h;return e=t[0][0],i=t[0][1],n=t[0][2],s=t[1][0],r=t[1][1],a=t[1][2],o=t[2][0],l=t[2][1],e*r*(h=t[2][2])-e*l*a-s*i*h+s*l*n+o*i*a-o*r*n};getExtensionLocation(){return s.MAGIC_COOKIE+4}getExtensionSize(t){return n.A.getIntAt(t,this.getExtensionLocation(),this.littleEndian)}getExtensionCode(t){return n.A.getIntAt(t,this.getExtensionLocation()+4,this.littleEndian)}addExtension(t,e=-1){-1==e?this.extensions.push(t):this.extensions.splice(e,0,t),this.vox_offset+=t.esize}removeExtension(t){let e=this.extensions[t];e&&(this.vox_offset-=e.esize),this.extensions.splice(t,1)}toArrayBuffer(t=!1){let e=352;if(t)for(let r of this.extensions)e+=r.esize;let i=new Uint8Array(e),n=new DataView(i.buffer);n.setInt32(0,348,this.littleEndian),n.setUint8(39,this.dim_info);for(let r=0;r<8;r++)n.setUint16(40+2*r,this.dims[r],this.littleEndian);n.setFloat32(56,this.intent_p1,this.littleEndian),n.setFloat32(60,this.intent_p2,this.littleEndian),n.setFloat32(64,this.intent_p3,this.littleEndian),n.setInt16(68,this.intent_code,this.littleEndian),n.setInt16(70,this.datatypeCode,this.littleEndian),n.setInt16(72,this.numBitsPerVoxel,this.littleEndian),n.setInt16(74,this.slice_start,this.littleEndian);for(let r=0;r<8;r++)n.setFloat32(76+4*r,this.pixDims[r],this.littleEndian);n.setFloat32(108,this.vox_offset,this.littleEndian),n.setFloat32(112,this.scl_slope,this.littleEndian),n.setFloat32(116,this.scl_inter,this.littleEndian),n.setInt16(120,this.slice_end,this.littleEndian),n.setUint8(122,this.slice_code),n.setUint8(123,this.xyzt_units),n.setFloat32(124,this.cal_max,this.littleEndian),n.setFloat32(128,this.cal_min,this.littleEndian),n.setFloat32(132,this.slice_duration,this.littleEndian),n.setFloat32(136,this.toffset,this.littleEndian),i.set((new TextEncoder).encode(this.description),148),i.set((new TextEncoder).encode(this.aux_file),228),n.setInt16(252,this.qform_code,this.littleEndian),n.setInt16(254,this.sform_code,this.littleEndian),n.setFloat32(256,this.quatern_b,this.littleEndian),n.setFloat32(260,this.quatern_c,this.littleEndian),n.setFloat32(264,this.quatern_d,this.littleEndian),n.setFloat32(268,this.qoffset_x,this.littleEndian),n.setFloat32(272,this.qoffset_y,this.littleEndian),n.setFloat32(276,this.qoffset_z,this.littleEndian);const s=this.affine.flat();for(let r=0;r<12;r++)n.setFloat32(280+4*r,s[r],this.littleEndian);if(i.set((new TextEncoder).encode(this.intent_name),328),i.set((new TextEncoder).encode(this.magic),344),t){i.set(Uint8Array.from([1,0,0,0]),348);let t=this.getExtensionLocation();for(const e of this.extensions)n.setInt32(t,e.esize,e.littleEndian),n.setInt32(t+4,e.ecode,e.littleEndian),i.set(new Uint8Array(e.edata),t+8),t+=e.esize}else i.set(new Uint8Array(4).fill(0),348);return i.buffer}}},5976:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var n=i(4990);class s{static crcTable=null;static GUNZIP_MAGIC_COOKIE1=31;static GUNZIP_MAGIC_COOKIE2=139;static getStringAt(t,e,i){var n,s,r="";for(n=e;n<i;n+=1)0!==(s=t.getUint8(n))&&(r+=String.fromCharCode(s));return r}static getByteAt=function(t,e){return t.getUint8(e)};static getShortAt=function(t,e,i){return t.getInt16(e,i)};static getIntAt(t,e,i){return t.getInt32(e,i)}static getFloatAt(t,e,i){return t.getFloat32(e,i)}static getDoubleAt(t,e,i){return t.getFloat64(e,i)}static getInt64At(t,e,i){const n=t.getUint32(e,i),s=t.getInt32(e+4,i);let r;return r=i?s*2**32+n:n*2**32+s,s<0&&(r+=-1*2**32*2**32),r}static getUint64At(t,e,i){const n=t.getUint32(e+(i?0:4),i),s=t.getUint32(e+(i?4:0),i);return i?s*2**32+n:n*2**32+s}static getExtensionsAt(t,e,i,r){let a=[],o=e;for(;o<r;){let e=i,l=s.getIntAt(t,o,i);if(!l)break;if(l+o>r&&(e=!e,l=s.getIntAt(t,o,e),l+o>r))throw new Error("This does not appear to be a valid NIFTI extension");if(l%16!=0)throw new Error("This does not appear to be a NIFTI extension");let h=s.getIntAt(t,o+4,e),f=t.buffer.slice(o+8,o+l),c=new n.s(l,h,f,e);a.push(c),o+=l}return a}static toArrayBuffer(t){var e,i,n;for(e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0;n<t.length;n+=1)i[n]=t[n];return e}static isString(t){return"string"==typeof t||t instanceof String}static formatNumber(t,e=void 0){let i;return i=s.isString(t)?Number(t):t,i=e?i.toPrecision(5):i.toPrecision(7),parseFloat(i)}static makeCRCTable(){let t,e=[];for(var i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}static crc32(t){s.crcTable||(s.crcTable=s.makeCRCTable());const e=s.crcTable;let i=~0;for(var n=0;n<t.byteLength;n++)i=i>>>8^e[255&(i^t.getUint8(n))];return~i>>>0}}}}]);